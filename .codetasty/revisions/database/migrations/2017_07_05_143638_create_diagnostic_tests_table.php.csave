codetasty.revision.2.0
{"ts":1501675354,"restoring":false,"user_id":4164,"patch":[{"diffs":[[1,"<?php\n\nuse Illuminate\\Support\\Facades\\Schema;\nuse Illuminate\\Database\\Schema\\Blueprint;\nuse Illuminate\\Database\\Migrations\\Migration;\n\nclass CreateDiagnosticTestsTable extends Migration\n{\n    /**\n     * Run the migrations.\n     *\n     * @return void\n     */\n    public function up()\n    {\n        Schema::create('diagnostic_tests', function (Blueprint $table) {\n            $table->increments('id');\n            $table->integer('object_id')->index()->unsigned();\n            $table->integer('fact_id')->index()->unsigned();\n            $table->integer('research_type_id')->index()->unsigned();\n            $table->integer('executor_id')->index()->unsigned();\n            $table->integer('preparation_receipt_id')->index()->unsigned();\n            $table->enum('year_multiplicity', ['первый раз', 'второй раз'])->default('первый раз');\n            $table->enum('service_characteristics', ['первично', 'вторично'])->default('первично');\n            $table->integer('count')->unsigned();\n            $table->integer('count_gz')->unsigned();\n            $table->integer('count_positive')->unsigned();\n            $table->string('comment', 255)->nullable();\n            $table->string('conclusion_num', 255)->nullable();\n            $table->integer('preparation_used_doses')->unsigned()->default(0);\n            $table->float('preparation_used_containers', 8, 2)->default(0);\n            $table->integer('preparation_destroyed_doses')->unsigned()->default(0);\n\n            $table->timestamps();\n        });\n\n        Schema::table('diagnostic_tests', function($table) {\n            $table->foreign('object_id')->references('id')->on('objects')->onDelete('cascade');\n            $table->foreign('fact_id')->references('id')->on('facts')->onDelete('cascade');\n            $table->foreign('executor_id')->references('id')->on('executors');\n            $table->foreign('preparation_receipt_id')->references('id')->on('preparation_receipts');\n            $table->foreign('research_type_id')->references('id')->on('research_types');\n        });\n    }\n\n    /**\n     * Reverse the migrations.\n     *\n     * @return void\n     */\n    public function down()\n    {\n        Schema::dropIfExists('diagnostic_tests');\n    }\n}\n"]],"start1":0,"start2":0,"length1":0,"length2":2205}],"length":2205}
{"ts":1501675792,"restoring":false,"user_id":4164,"patch":[{"diffs":[[0,"bject_id')->"],[-1,"index()->"],[0,"unsigned();\n"]],"start1":430,"start2":430,"length1":33,"length2":24},{"diffs":[[0,"'fact_id')->"],[-1,"index()->"],[0,"unsigned();\n"]],"start1":482,"start2":482,"length1":33,"length2":24},{"diffs":[[0,"_type_id')->"],[-1,"index()->"],[0,"unsigned();\n"]],"start1":543,"start2":543,"length1":33,"length2":24},{"diffs":[[0,"cutor_id')->"],[-1,"index()->"],[0,"unsigned();\n"]],"start1":599,"start2":599,"length1":33,"length2":24},{"diffs":[[0,"')->"],[-1,"index()->"],[0,"unsi"]],"start1":674,"start2":674,"length1":17,"length2":8}],"length":2160}