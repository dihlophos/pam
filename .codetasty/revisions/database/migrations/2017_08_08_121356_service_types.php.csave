codetasty.revision.2.0
{"ts":1502194848,"restoring":false,"user_id":4164,"patch":[{"diffs":[[1,"<?php\n\nuse Illuminate\\Support\\Facades\\Schema;\nuse Illuminate\\Database\\Schema\\Blueprint;\nuse Illuminate\\Database\\Migrations\\Migration;\n\nclass ServiceTypes extends Migration\n{\n    /**\n     * Run the migrations.\n     *\n     * @return void\n     */\n    public function up()\n    {\n        Schema::create('service_types', function (Blueprint $table) {\n            $table->increments('id');\n            $table->string('name');\n            $table->timestamps();\n        });\n        \n        Schema::create('service_service_type', function (Blueprint $table) {\n            $table->increments('id');\n            $table->integer('service_id')->unsigned();\n            $table->integer('service_type_id')->unsigned();\n            $table->timestamps();\n        });\n    }\n\n    /**\n     * Reverse the migrations.\n     *\n     * @return void\n     */\n    public function down()\n    {\n        Schema::dropIfExists('service_service_type');\n        Schema::dropIfExists('service_types');\n    }\n}\n"]],"start1":0,"start2":0,"length1":0,"length2":973}],"length":973}
{"ts":1502194929,"restoring":false,"user_id":4164,"patch":[{"diffs":[[0,"        });\n"],[1,"        \n        Schema::table('service_service_type', function (Blueprint $table) {\n            $table->foreign('service_id')->references('id')->on('services');\n            $table->foreign('service_type_id')->references('id')->on('service_types');\n        });\n\n"],[0,"    }\n\n    /"]],"start1":738,"start2":738,"length1":24,"length2":286}],"length":1235}
{"ts":1502194987,"restoring":false,"user_id":4164,"patch":[{"diffs":[[0,"   });\n        \n"],[1,"        Schema::disableForeignKeyConstraints();\n        \n"],[0,"        Schema::"]],"start1":743,"start2":743,"length1":32,"length2":89},{"diffs":[[0,"     });"],[1,"\n        \n        Schema::table('facts', function (Blueprint $table) {\n             $table->integer('service_type_id')->unsigned();\n        });\n        \n        Schema::table('facts', function (Blueprint $table) {\n            $table->foreign('service_type_id')->references('id')->on('service_types');\n        });\n        \n        Schema::enableForeignKeyConstraints();"],[0,"\n\n    }\n"]],"start1":1059,"start2":1059,"length1":16,"length2":384}],"length":1660}
{"ts":1502195034,"restoring":false,"user_id":4164,"patch":[{"diffs":[[0,"on down()\n    {\n"],[1,"        Schema::disableForeignKeyConstraints();\n        Schema::table('facts', function (Blueprint $table) {\n            $table->dropForeign(['service_category_id']);\n            $table->dropColumn('service_category_id');\n        });\n        Schema::enableForeignKeyConstraints();\n\n"],[0,"        Schema::"]],"start1":1535,"start2":1535,"length1":32,"length2":314}],"length":1942}
{"ts":1502195046,"restoring":false,"user_id":4164,"patch":[{"diffs":[[0,"n(['service_"],[-1,"category"],[1,"type"],[0,"_id']);\n    "]],"start1":1690,"start2":1690,"length1":32,"length2":28},{"diffs":[[0,"ice_"],[-1,"category"],[1,"type"],[0,"_id'"]],"start1":1750,"start2":1750,"length1":16,"length2":12}],"length":1934}
{"ts":1502195103,"restoring":false,"user_id":4164,"patch":[{"diffs":[[0,"('services')"],[1,"->onDelete('cascade');"],[0,";\n          "]],"start1":955,"start2":955,"length1":24,"length2":46},{"diffs":[[0,"'service_types')"],[1,"->onDelete('cascade');"],[0,";\n        });\n  "]],"start1":1060,"start2":1060,"length1":32,"length2":54}],"length":1978}
{"ts":1502195133,"restoring":false,"user_id":4164,"patch":[{"diffs":[[0,"lete('cascade');"],[-1,";"],[0,"\n            $ta"]],"start1":973,"start2":973,"length1":33,"length2":32},{"diffs":[[0,"scade');"],[-1,";"],[0,"\n       "]],"start1":1089,"start2":1089,"length1":17,"length2":16}],"length":1976}